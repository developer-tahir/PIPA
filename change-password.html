<!DOCTYPE html>
<html lang="en-AU">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change Password - PIPA Farm</title>
    
    <!-- Dyslexia-friendly font -->
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/sidebar.css">
    <link rel="stylesheet" href="assets/css/profile.css">
    <link rel="stylesheet" href="assets/css/enhanced-buttons.css">
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-img">
                    <i class="fas fa-tractor"></i>
                </div>
                <h1>PIPA Farm</h1>
            </div>
            
            <nav class="nav-menu">
                <ul>
                    <li><a href="index.html"><i class="fas fa-tachometer-alt"></i>Dashboard</a></li>
                    <li><a href="tasks.html"><i class="fas fa-tasks"></i>Tasks</a></li>
                    <li><a href="timesheet.html"><i class="fas fa-clock"></i>Timesheets</a></li>
                    <li><a href="safety.html"><i class="fas fa-hard-hat"></i>Safety Reports</a></li>
                    <li><a href="calendar.html"><i class="fas fa-calendar"></i>Calendar</a></li>
                    <li><a href="employees.html"><i class="fas fa-users"></i>Employees</a></li>
                    <li><a href="find-workers.html"><i class="fas fa-search"></i>Find Workers</a></li>
                    <li><a href="chat.html"><i class="fas fa-comments"></i>Chat</a></li>
                    <li><a href="training.html"><i class="fas fa-graduation-cap"></i>Training</a></li>
                    <div class="nav-divider"></div>
                    <li><a href="settings.html"><i class="fas fa-cog"></i>Settings</a></li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-profile">
                        <img src="assets/images/avatar1.jpg" alt="Tahir M" onerror="this.onerror=null; this.src=''; this.insertAdjacentHTML('afterend', '<div class=\'avatar-fallback\'>TM</div>'); this.style.display='none';">
                        <div class="user-details">
                            <span class="user-name">Tahir M</span>
                            <span class="user-role">Developer</span>
                        </div>
                    </div>
                </div>
                <ul class="sidebar-footer-menu">
                    <li><a href="profile.html"><i class="fas fa-user-circle"></i> Profile</a></li>
                    <li><a href="#"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                </ul>
            </div>
        </aside>

        <!-- Main Content -->
        <main id="main-content" class="main-content">
            <div class="password-container">
                <!-- Header -->
                <header class="profile-header">
                    <div class="header-content">
                        <h2>Change Password</h2>
                        <p class="subtitle">Update your password to keep your account secure</p>
                    </div>
                    <div class="header-actions action-buttons">
                        <a href="profile.html" class="btn btn-secondary">
                            <i class="fas fa-arrow-left" aria-hidden="true"></i>
                            Back to Profile
                        </a>
                    </div>
                </header>

                <!-- Password Change Form -->
                <section class="password-form-section" aria-labelledby="password-form-title">
                    <div class="form-card">
                        <h3 id="password-form-title">Update Your Password</h3>
                        <div class="password-guidelines">
                            <h4><i class="fas fa-shield-alt" aria-hidden="true"></i> Password Guidelines</h4>
                            <ul>
                                <li>Use at least 8 characters</li>
                                <li>Include at least one uppercase letter</li>
                                <li>Include at least one number</li>
                                <li>Include at least one special character</li>
                                <li>Don't reuse old passwords</li>
                            </ul>
                        </div>
                        <form id="changePasswordForm" class="needs-validation">
                            <div class="form-group">
                                <label for="currentPassword">Current Password</label>
                                <div class="password-input-container">
                                    <input type="password" id="currentPassword" name="currentPassword" required>
                                    <button type="button" class="toggle-password" aria-label="Show password">
                                        <i class="fas fa-eye" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div class="form-error" id="currentPasswordError"></div>
                            </div>
                            <div class="form-group">
                                <label for="newPassword">New Password</label>
                                <div class="password-input-container">
                                    <input type="password" id="newPassword" name="newPassword" required
                                           pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$">
                                    <button type="button" class="toggle-password" aria-label="Show password">
                                        <i class="fas fa-eye" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div class="form-error" id="newPasswordError"></div>
                                <div class="password-strength">
                                    <div class="strength-meter">
                                        <div class="strength-progress" id="passwordStrength"></div>
                                    </div>
                                    <span class="strength-text" id="passwordStrengthText">Password strength</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="confirmPassword">Confirm New Password</label>
                                <div class="password-input-container">
                                    <input type="password" id="confirmPassword" name="confirmPassword" required>
                                    <button type="button" class="toggle-password" aria-label="Show password">
                                        <i class="fas fa-eye" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div class="form-error" id="confirmPasswordError"></div>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary" onclick="window.location.href='profile.html'">Cancel</button>
                                <button type="submit" class="btn btn-primary">Update Password</button>
                            </div>
                        </form>
                    </div>
                </section>

                <!-- Recent Activity Section -->
                <section class="recent-activity" aria-labelledby="activity-title">
                    <div class="section-card">
                        <h3 id="activity-title">Recent Account Activity</h3>
                        <div class="activity-list">
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-sign-in-alt" aria-hidden="true"></i>
                                </div>
                                <div class="activity-content">
                                    <p class="activity-title">Login</p>
                                    <p class="activity-details">Today at 8:45 AM • Brisbane, QLD</p>
                                </div>
                                <div class="activity-device">
                                    <i class="fas fa-desktop" aria-hidden="true"></i>
                                    <span>Desktop</span>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-sign-in-alt" aria-hidden="true"></i>
                                </div>
                                <div class="activity-content">
                                    <p class="activity-title">Login</p>
                                    <p class="activity-details">Yesterday at 7:30 AM • Brisbane, QLD</p>
                                </div>
                                <div class="activity-device">
                                    <i class="fas fa-mobile-alt" aria-hidden="true"></i>
                                    <span>Mobile</span>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-user-edit" aria-hidden="true"></i>
                                </div>
                                <div class="activity-content">
                                    <p class="activity-title">Profile Updated</p>
                                    <p class="activity-details">2 days ago at 11:20 AM • Brisbane, QLD</p>
                                </div>
                                <div class="activity-device">
                                    <i class="fas fa-desktop" aria-hidden="true"></i>
                                    <span>Desktop</span>
                                </div>
                            </div>
                        </div>
                        <div class="view-all-link">
                            <a href="#">View all activity <i class="fas fa-chevron-right" aria-hidden="true"></i></a>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal">
        <div class="modal-backdrop"></div>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Password Changed Successfully</h3>
                    <button class="modal-close" aria-label="Close modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="modal-icon success">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <p>Your password has been updated successfully. You'll use this new password the next time you log in.</p>
                    <p>For security reasons, you might be logged out of other devices where you were previously logged in.</p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary">Got it</button>
                </div>
            </div>
        </div>
    </div>

    <style>
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 1050;
    }
    
    .modal.show, .modal[style*="display: block"] {
        display: block !important;
    }
    
    .modal-backdrop {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
    }
    
    .modal-dialog {
        position: relative;
        width: 90%;
        max-width: 500px;
        margin: 10vh auto;
        animation: slideDown 0.3s ease;
    }
    
    @keyframes slideDown {
        from { transform: translateY(-50px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }
    
    .modal-content {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        overflow: hidden;
    }
    
    body.modal-open {
        overflow: hidden;
    }
    </style>

    <!-- Custom JavaScript -->
    <script src="assets/js/main.js"></script>
    <script src="assets/js/password.js"></script>
</body>
</html> 